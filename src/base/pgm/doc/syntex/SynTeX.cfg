/*	Kopfinitialisierung für SynTeX
	(c) 1999 Erich Frühstück
	A-3423 St.Andrä/Wördern, Südtirolergasse 17-21/5
*/

plain << "\\documentclass[10pt,a4paper,"; 

if	(style == "book")	plain << "twoside";
else				plain << "oneside";

plain << "]{report}\n";
plain << "\\usepackage[";

if	(synflag)		plain << synflag;
else if	(style == "book")	plain << "twotitlepage,sectionpage";
else if	(style == "report")	plain << "onetitlepage,chapterpage";
else				plain << "notitlepage";

plain << "]{syntex}\n";

plain << "\n% Dokumentspezifische Makromodule\n\n";
plain << synpkg;

/*	Titeldefinition
*/

plain << "\n% Titeldefinitionen\n\n";

FileStat fstat = FileStat(DocName);

plain << "\\Titelkopf[{";

if	(date)	plain << date;
else		today().print(cout, "%B %Y");

plain << "}]{";

if	(dochead)	plain << dochead;
else if	(fstat)		fprintf(cout, "Datei: %s", fstat.path);
else			fpsub(cout, "$!: Standardeingabe");

plain << "}\n";
plain << "\\Titel{";

if	(title)	plain << title;
else if	(fstat)	cout << fstat.path;
else		cout << "Standardeingabe";

plain << "}{";

if	(subtitle)	plain << subtitle;
else if	(fstat)	 fstat.mtime.print(cout, "Letzte Änderung: %-d. %b %Y %H:%M");
else	;

plain << "}\n";
plain << "\\Autor{";

if	(author)
{
	plain << author;
}
else if	(fstat)
{
	passwd pw = passwd(fstat.uid);
	fprintf(cout, "Eigentümer: %s (%s)", split(pw.gecos, ",").obj, pw.name);
}
else
{
	passwd pw = passwd(getuid());
	fprintf(cout, "Operator: %s (%s)", split(pw.gecos, ",").obj, pw.name);
}

plain << "}\n";

if	(docnote)
	fprintf(plain, "\\Anmerkung{%s}\n", docnote);

fprintf(plain, "\\Adresse{%s}\n", addr ? addr : "\~");

/*	Dokumentbeginn
*/

plain << "\n\\begin{document}\n";

/*	Titelblatt
*/

plain << "\\maketitle\n";
