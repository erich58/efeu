\entry{Bitfield}
\Name
\caption{Bitfeldstrukturen generieren}
\Synopsis
\hang	\#include <bitfield.ms>
\hang	void Bitfield(str name, IO def, str desc = NULL)
\Description
Die Funktion \tt{Bitfield} generiert eine Bitfeldstruktur.
Dabei gibt \it{name} den Namen der Struktur, \it{def} eine Eingabestruktur
mit Variablendefinitionen und \it{desc} eine optionale Kurzbezeichnung
der Struktur an.
Eine Definitionszeile in der Eingabestruktur hat die Gestalt:
\nofill
	Bitlänge Name Beschreibungstext
\end
Die Struktur wird unter dem Namen \it{name}\tt{_t} generiert.
Zur Ausrichtung auf ganze Wörter (32 Bit) werden bei Bedarf
Dummyvariablen eingeführt.

Neben der Strukturdefinition wird der
Makro \it{name}\tt{_size} mit der Strukturlänge definiert
und die Makrofunktionen
\nofill
	Read\it{Name}(file, buf, dim)
	Write\it{Name}(file, buf, dim)
\end
zur binären Ein- und Ausgabe von Datensätzen dieser Struktur generiert.

Die Funktion \tt{BitField} generiert nur Headerdefinitionen, es werden
keine Sourcezeilen ausgegeben.

\section{DOKUMENTATION}
\sloppy
Falls der Dokumentationslauf in ein TeX-Dokument eingebunden wird,
kann mit \tt{\\UseBitfield}[\it{pos}]{\it{name}} eine Tabelle
mit den Komponenten der Bitfeldstruktur abgerufen werden.
Der Positionierungsparameter \it{pos} ist optional und hat die gleiche Bedeutung
wie bei der \tt{tabular} Umgebung.
\end

Neben der Tabelle werden auch Indexeinträge für den Strukturnamen und
die Kurzbezeichnung generiert. Weiters wird auch eine Referenz für die Tabelle
unter dem Strukturnamen eingerichtet.

\SeeAlso
mksource(1), Datatype(7).
